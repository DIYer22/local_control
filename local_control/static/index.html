<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Local Control</title>
    <link
      rel="icon"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'%3E%3Ctext y='1em' font-size='96'%3E%F0%9F%96%B1%EF%B8%8F%3C/text%3E%3C/svg%3E"
    />
    <link rel="stylesheet" href="/static/css/styles.css" />
  </head>
  <body>
    <main>
      <section id="login-view">
        <h1>Local Control</h1>
        <form id="login-form">
          <label>
            Username
            <input type="text" id="username" autocomplete="username" required />
          </label>
          <label>
            Password
            <input type="password" id="password" autocomplete="current-password" required />
          </label>
          <label class="remember">
            <input type="checkbox" id="remember" />
            Remember this device
          </label>
          <button type="submit">Sign In</button>
          <p id="login-error" class="error" aria-live="assertive"></p>
        </form>
      </section>

      <section id="control-view" hidden>
        <header>
          <div>
            <h2>Remote Pad</h2>
            <p class="status">
              Signed in as <span id="status-user"></span>
            </p>
          </div>
          <div class="header-actions">
            <button id="help-button" class="icon-button" aria-label="Show help">‚ùî</button>
            <button id="logout-button" class="secondary">Log out</button>
          </div>
        </header>

        <div class="control-layout">
          <div class="trackpad-wrapper">
            <div id="trackpad" role="application" aria-label="Trackpad surface">
              <span class="trackpad-hint">Drag to move, tap for click.</span>
              <div id="pointer-sync-indicator" aria-hidden="true">
                <p>
                  Pointer synced. Push against any screen edge or press Esc to escape the lock.
                </p>
              </div>
            </div>
            <div class="controls">
              <button data-click="left">Left Click</button>
              <button data-click="right">Right Click</button>
              <button data-click="middle">Middle Click</button>
              <button data-click="double">Double Click</button>
            </div>

            <div class="media-panel" id="media-panel">
              <button type="button" class="media-toggle" id="media-toggle" aria-expanded="false">
                <span class="media-toggle-text">
                  <span class="media-toggle-icon" aria-hidden="true">‚ñ∏</span>
                  Media Panel
                </span>
                <span class="media-toggle-hint">Volume &amp; playback</span>
              </button>
              <div class="media-content" id="media-content" aria-hidden="true">
                <div class="media-volume">
                  <span aria-hidden="true">üîà</span>
                  <input type="range" id="media-volume" min="0" max="100" value="50" />
                  <span aria-hidden="true">üîä</span>
                  <button type="button" class="icon-button subtle" data-media="mute" aria-label="Mute audio">
                    üîá
                  </button>
                </div>
                <div class="media-buttons">
                  <button type="button" class="media-pill" data-media="prev">
                    <span class="media-pill-icon">‚èÆ</span>
                    <span class="media-pill-label">Previous</span>
                  </button>
                  <button type="button" class="media-pill accent" data-media="playpause">
                    <span class="media-pill-icon">‚èØ</span>
                    <span class="media-pill-label">Play / Pause</span>
                  </button>
                  <button type="button" class="media-pill" data-media="next">
                    <span class="media-pill-icon">‚è≠</span>
                    <span class="media-pill-label">Next</span>
                  </button>
                  <button type="button" class="media-pill" data-media="esc">
                    <span class="media-pill-icon">‚éã</span>
                    <span class="media-pill-label">Exit Fullscreen</span>
                  </button>
                </div>
                <div class="media-directions" aria-label="Directional controls">
                  <button type="button" data-media="arrow-left" aria-label="Arrow left">‚óÄ</button>
                  <div class="media-direction-vertical">
                    <button type="button" data-media="arrow-up" aria-label="Arrow up">‚ñ≤</button>
                    <button type="button" data-media="arrow-down" aria-label="Arrow down">‚ñº</button>
                  </div>
                  <button type="button" data-media="arrow-right" aria-label="Arrow right">‚ñ∂</button>
                </div>
                <p id="media-status" class="hint"></p>
              </div>
            </div>
          </div>

          <div class="control-panel">
            <div class="realtime">
              <label for="realtime-input">Realtime input</label>
              <input
                id="realtime-input"
                type="text"
                autocomplete="off"
                autocapitalize="none"
                spellcheck="false"
                placeholder="Focus here to stream keystrokes instantly"
              />
              <small>Keys send as you type; Backspace/Delete and Enter are forwarded automatically.</small>
            </div>

            <form id="type-form" class="keyboard">
              <label for="type-input">Type or paste text</label>
              <div class="type-input-wrapper">
                <textarea
                  id="type-input"
                  rows="3"
                  autocomplete="off"
                  placeholder="Paste text, then press Send or ‚åò/Ctrl + Enter"
                ></textarea>
                <button type="submit" id="type-send">Send</button>
              </div>
              <small>Special keys (Enter, Backspace, arrows, etc.) are forwarded while this area is focused.</small>
            </form>

            <div class="clipboard">
              <div class="clipboard-header">
                <h3>Clipboard Bridge</h3>
                <div class="clipboard-actions">
                  <button id="clipboard-pull" class="secondary">Pull from host</button>
                  <button id="clipboard-push">Push to host</button>
                </div>
              </div>
              <div class="clipboard-preview">
                <textarea
                  id="clipboard-text"
                  rows="3"
                  readonly
                  placeholder="Clipboard text preview"
                ></textarea>
                <img id="clipboard-image" alt="Clipboard image preview" hidden />
              </div>
              <p id="clipboard-status" class="hint"></p>
            </div>

            <div class="system-actions">
              <button id="lock-button" class="warn">Lock Screen</button>
              <button id="shutdown-button" class="danger">Shutdown</button>
              <button id="unlock-button" class="secondary">Wake / Unlock</button>
            </div>
          </div>
        </div>
      </section>
      <div id="help-overlay" hidden>
        <div class="help-panel" role="dialog" aria-modal="true" aria-labelledby="help-title">
          <button id="help-close" class="icon-button" aria-label="Close help">‚úï</button>
          <h3 id="help-title">Quick Help</h3>
          <ul>
            <li>Single finger swipe moves the remote cursor. Tap once to left click.</li>
            <li>Two fingers drag to scroll. Tap with two fingers for right click.</li>
            <li>Three-finger tap triggers a middle click. Push to screen edges to release pointer lock.</li>
            <li>Realtime input streams keystrokes instantly; the text pad sends blocks of text.</li>
            <li>Use the power buttons for lock, shutdown, or wake actions (wake is best-effort on macOS).</li>
          </ul>
        </div>
      </div>
    </main>

    <script src="/static/js/app.js" defer></script>
  </body>
</html>
